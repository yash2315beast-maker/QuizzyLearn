<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Math Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-color: #f0f4f8;
      --grid-color: #d0d8e0;
      --text-color: #34495e;
      --primary-blue: #007bff;
      --light-blue: #e7f3ff;
      --correct-green: #28a745;
      --light-green: #e9f7ea;
      --incorrect-red: #dc3545;
      --light-red: #fdecea;
      --white: #ffffff;
      --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      background-image:
        linear-gradient(var(--grid-color) 1px, transparent 1px),
        linear-gradient(to right, var(--grid-color) 1px, transparent 1px);
      background-size: 20px 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    
    .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100;
        backdrop-filter: blur(5px);
    }
    .modal-content {
        background: var(--white);
        padding: 30px 40px;
        border-radius: 15px;
        box-shadow: var(--shadow);
        text-align: center;
        max-width: 400px;
        width: 90%;
    }
    .modal-content h2 { margin-bottom: 20px; }
    .difficulty-btn {
        display: block;
        width: 100%;
        padding: 15px;
        margin-bottom: 15px;
        font-size: 1.1rem;
        font-weight: 600;
        border: 2px solid var(--primary-blue);
        border-radius: 8px;
        background: var(--light-blue);
        color: var(--primary-blue);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .difficulty-btn:hover { background: var(--primary-blue); color: var(--white); }
    .difficulty-btn small {
        font-weight: 400;
        display: block;
        font-size: 0.8rem;
        margin-top: 4px;
    }
    
    .back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 10;
      background: var(--white);
      color: var(--primary-blue);
      width: 45px;
      height: 45px;
      border-radius: 50%;
      border: 2px solid var(--primary-blue);
      font-size: 1.5rem;
      text-decoration: none;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
    }
    .back-btn:hover {
      background: var(--primary-blue);
      color: var(--white);
      transform: scale(1.1);
    }

    .quiz-wrapper {
      background: var(--white);
      border-radius: 15px;
      box-shadow: var(--shadow);
      width: 100%;
      max-width: 550px;
      overflow: hidden;
    }

    .quiz-header {
      padding: 20px 25px;
      background-color: #f7f9fc;
      border-bottom: 1px solid #e0e6ed;
    }
    .quiz-header h1 { font-size: 1.5rem; margin-bottom: 10px; }
    #progress-container {
      width: 100%; height: 8px; background-color: #e0e6ed; border-radius: 4px;
    }
    #progress-bar {
      width: 0%; height: 100%; background-color: var(--primary-blue); border-radius: 4px; transition: width 0.4s ease;
    }
    #question-counter {
      font-size: 0.9rem; font-weight: 600; color: #7f8c8d; margin-top: 10px;
    }
    .quiz-body { padding: 25px; }
    #question-text {
      font-size: 1.2rem; font-weight: 600; margin-bottom: 20px; min-height: 60px;
    }
    .options-container { display: flex; flex-direction: column; gap: 12px; }
    .option {
      display: block; width: 100%; padding: 12px 15px; font-size: 1rem;
      font-family: 'Poppins', sans-serif; text-align: left; background: var(--white);
      color: var(--text-color); border: 2px solid #e0e6ed; border-radius: 8px;
      cursor: pointer; transition: all 0.3s ease;
    }
    .option:hover:not(:disabled) {
      background: var(--light-blue); border-color: var(--primary-blue);
    }
    .option:disabled { cursor: not-allowed; }
    .option.correct {
      background-color: var(--light-green); border-color: var(--correct-green); color: var(--correct-green); font-weight: 600;
    }
    .option.incorrect {
      background-color: var(--light-red); border-color: var(--incorrect-red); color: var(--incorrect-red);
    }
    #feedback {
      margin-top: 20px; padding: 12px; border-radius: 8px; font-size: 0.9rem; display: none;
    }
    #feedback.correct {
      background-color: var(--light-green); color: var(--correct-green);
    }
    #feedback.incorrect {
      background-color: var(--light-red); color: var(--incorrect-red);
    }
    .quiz-footer { padding: 20px 25px; text-align: right; }
    .action-btn {
      padding: 12px 30px; font-size: 1rem; font-weight: 600; border: none;
      border-radius: 8px; cursor: pointer; background: var(--primary-blue);
      color: var(--white); transition: all 0.3s ease;
    }
    .action-btn:hover { opacity: 0.9; transform: scale(1.02); }
    #result-screen { text-align: center; padding: 40px 25px; }
    #result-screen h2 { font-size: 2rem; margin-bottom: 15px; }
    #score-text { font-size: 1.2rem; margin-bottom: 20px; }
    #badge { font-size: 1.1rem; font-weight: 600; margin-bottom: 30px; }
    .gold { color: #ffbf00; }
    .silver { color: #c0c0c0; }
    .bronze { color: #cd7f32; }


    /* ============================================= */
    /* --- MOBILE RESPONSIVE STYLES --- */
    /* Styles applied on screens 600px wide or less */
    /* ============================================= */
    @media (max-width: 600px) {
        body {
            /* Remove padding to allow content to go edge-to-edge */
            padding: 0;
        }

        .quiz-wrapper {
            /* Make the quiz container fill the screen */
            max-width: 100%;
            height: 100vh;
            border-radius: 0;
            box-shadow: none;
            display: flex;
            flex-direction: column;
        }
        
        #quiz-container, #result-screen {
             flex-grow: 1; /* Allow these to fill the available space */
             display: flex !important;
             flex-direction: column;
        }
        #result-screen { justify-content: center; }

        .quiz-body {
            flex-grow: 1; /* Pushes the footer down */
        }
        
        .back-btn {
            /* Move button slightly closer to the edge */
            top: 15px;
            left: 15px;
        }
        
        .modal-content {
            /* Reduce horizontal padding on mobile */
            padding: 30px 25px;
        }

        /* Adjust padding inside the quiz for more content space */
        .quiz-header, .quiz-body, .quiz-footer {
            padding-left: 15px;
            padding-right: 15px;
        }

        #result-screen {
            padding: 20px 15px;
        }
        
        /* Adjust font sizes for better readability on small screens */
        .quiz-header h1 { font-size: 1.3rem; }
        #question-text { font-size: 1.1rem; }
        #result-screen h2 { font-size: 1.8rem; }
        #score-text { font-size: 1.1rem; }
        #badge { font-size: 1rem; }

        .action-btn {
            /* Make buttons full-width for easier tapping */
            width: 100%;
            padding: 15px;
        }
    }

  </style>
</head>
<body>

  <!-- Difficulty Selection Modal -->
  <div id="difficulty-modal" class="modal">
    <div class="modal-content">
        <h2>Choose Difficulty Level</h2>
        <button class="difficulty-btn" onclick="startQuiz('normal')">
            Normal
            <small>(Grade 6 Level)</small>
        </button>
        <button class="difficulty-btn" onclick="startQuiz('hard')">
            Hard
            <small>(Grade 7 Level)</small>
        </button>
    </div>
  </div>
  
  <a href="../subjects.html" class="back-btn" aria-label="Go Back"> &#8592; </a>
  
  <div class="quiz-wrapper" id="quiz-wrapper" style="display: none;">
    <!-- Main Quiz View -->
    <div id="quiz-container">
      <div class="quiz-header">
        <h1>Math Quiz</h1>
        <div id="progress-container"><div id="progress-bar"></div></div>
        <p id="question-counter"></p>
      </div>
      <div class="quiz-body">
        <p id="question-text">Loading question...</p>
        <div id="options-container" class="options-container"></div>
        <div id="feedback"></div>
      </div>
      <div class="quiz-footer">
        <button id="next-btn" class="action-btn" onclick="nextQuestion()" style="display: none;">Next</button>
      </div>
    </div>

    <!-- Final Result View -->
    <div id="result-screen" style="display: none;">
      <h2>🎉 Quiz Completed!</h2>
      <p id="score-text"></p>
      <div id="badge"></div>
      <button id="restart-btn" class="action-btn" onclick="restartQuiz()">Choose Difficulty</button>
    </div>
  </div>

  <script>
    // JavaScript remains exactly the same. No changes are needed for the logic.
    const quizData = {
        normal: [
            { q: "What is 7 × 8 ?", options: [48, 56, 64, 72], correct: 56, explanation: "7 multiplied by 8 equals 56. It's a key fact in the multiplication tables." },
            { q: "What is 15 ÷ 3 ?", options: [5, 6, 4, 3], correct: 5, explanation: "15 divided into 3 equal groups gives you 5 in each group." },
            { q: "Solve: 12 + 9 = ?", options: [21, 20, 19, 18], correct: 21, explanation: "Adding 12 and 9 gives a sum of 21." },
            { q: "What is 45 − 19 ?", options: [24, 25, 26, 27], correct: 26, explanation: "Subtracting 19 from 45 leaves you with 26." },
            { q: "What is half of 50 ?", options: [20, 25, 15, 30], correct: 25, explanation: "Half of a number is the same as dividing it by 2. So, 50 ÷ 2 = 25." },
            { q: "Simplify: 3 × (4 + 2)", options: [18, 20, 15, 12], correct: 18, explanation: "Following the order of operations (PEMDAS/BODMAS), you solve the parentheses first: 4 + 2 = 6. Then, 3 × 6 = 18." },
            { q: "Find the value: 100 ÷ 5", options: [15, 25, 20, 30], correct: 20, explanation: "100 divided by 5 equals 20. Think of it as how many 5s fit into 100." },
            { q: "Which is greater: 3/4 or 2/3 ?", options: ["3/4", "2/3", "Equal", "None"], correct: "3/4", explanation: "To compare fractions, find a common denominator (12). 3/4 becomes 9/12 and 2/3 becomes 8/12. Since 9 is greater than 8, 3/4 is greater." },
            { q: "What is the square of 9 ?", options: [18, 81, 27, 72], correct: 81, explanation: "The square of a number is that number multiplied by itself. So, 9 × 9 = 81." },
            { q: "If a box has 12 apples and you eat 5, how many are left?", options: [5, 6, 7, 8], correct: 7, explanation: "This is a simple subtraction problem: 12 - 5 = 7 apples left." }
        ],
        hard: [
            { q: "Solve for x: 3x - 5 = 16", options: [5, 7, 9, 11], correct: 7, explanation: "To solve for x, first add 5 to both sides (16+5=21), so 3x = 21. Then, divide by 3. 21 ÷ 3 = 7." },
            { q: "What is 15% of 200?", options: [15, 20, 30, 40], correct: 30, explanation: "To find 15%, you can multiply 200 by 0.15. 200 * 0.15 = 30." },
            { q: "Calculate: -8 + (-12)", options: [-4, 4, -20, 20], correct: -20, explanation: "Adding two negative numbers results in a more negative number. It's like moving 8 steps left, then another 12 steps left on a number line." },
            { q: "Find the area of a triangle with base 10cm and height 6cm.", options: ["30 cm²", "60 cm²", "16 cm²", "15 cm²"], correct: "30 cm²", explanation: "The formula for the area of a triangle is (base × height) / 2. So, (10 × 6) / 2 = 60 / 2 = 30 cm²." },
            { q: "Simplify: 5 + (18 ÷ 3) * 2", options: [22, 17, 11, 16], correct: 17, explanation: "Using PEMDAS/BODMAS: Parentheses first (18÷3=6). Then Multiplication (6*2=12). Finally Addition (5+12=17)." },
            { q: "A jacket costs $40 after a 20% discount. What was the original price?", options: ["$48", "$50", "$52", "$60"], correct: "$50", explanation: "$40 represents 80% of the original price (100%-20%). To find 100%, calculate (40 / 80) * 100 = $50." },
            { q: "What is the average of these numbers: 4, 8, 9, 11, 13?", options: [8, 9, 9.5, 10], correct: 9, explanation: "To find the average, sum the numbers (4+8+9+11+13 = 45) and divide by the count of numbers (5). 45 ÷ 5 = 9." },
            { q: "Convert 0.6 to a fraction in its simplest form.", options: ["6/10", "3/5", "1/6", "2/3"], correct: "3/5", explanation: "0.6 is the same as 6/10. Both the numerator and denominator can be divided by 2, simplifying the fraction to 3/5." },
            { q: "Solve: (-5) × (-4) + 10", options: [10, -10, 30, -30], correct: 30, explanation: "First, multiply the negative numbers. A negative times a negative is a positive, so (-5)×(-4) = 20. Then, add 10. 20 + 10 = 30." },
            { q: "If the ratio of dogs to cats is 2:3 and there are 25 pets total, how many are cats?", options: [10, 12, 15, 18], correct: 15, explanation: "The ratio 2:3 means there are 2+3=5 parts in total. Divide the total pets by the parts (25/5=5). Each part is 5 pets. Since cats are 3 parts, 3 * 5 = 15 cats." }
        ]
    };
    
    let currentQuestionIndex = 0;
    let score = 0;
    let activeQuizData = [];

    const difficultyModal = document.getElementById('difficulty-modal');
    const quizWrapper = document.getElementById('quiz-wrapper');
    const quizContainer = document.getElementById('quiz-container');
    const resultScreen = document.getElementById('result-screen');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const feedback = document.getElementById('feedback');
    const nextBtn = document.getElementById('next-btn');
    const progressBar = document.getElementById('progress-bar');
    const questionCounter = document.getElementById('question-counter');

    function startQuiz(difficulty) {
        activeQuizData = quizData[difficulty];
        currentQuestionIndex = 0;
        score = 0;
        
        difficultyModal.style.display = 'none';
        quizWrapper.style.display = 'flex'; // Changed to flex for mobile layout
        quizContainer.style.display = 'block';
        resultScreen.style.display = 'none';
        nextBtn.style.display = 'none';
        
        loadQuestion();
    }

    function loadQuestion() {
        feedback.style.display = 'none';
        nextBtn.style.display = 'none';
        optionsContainer.innerHTML = '';
        
        const currentQuestion = activeQuizData[currentQuestionIndex];
        questionText.innerText = currentQuestion.q;
        
        progressBar.style.width = `${((currentQuestionIndex) / activeQuizData.length) * 100}%`;
        questionCounter.innerText = `Question ${currentQuestionIndex + 1} / ${activeQuizData.length}`;

        currentQuestion.options.forEach(option => {
            const button = document.createElement("button");
            button.className = "option";
            button.innerText = option;
            button.onclick = () => selectAnswer(option, button);
            optionsContainer.appendChild(button);
        });
    }

    function selectAnswer(selectedOption, selectedButton) {
        const currentQuestion = activeQuizData[currentQuestionIndex];
        const correct = currentQuestion.correct;

        Array.from(optionsContainer.children).forEach(button => {
            button.disabled = true;
            if (button.innerText == correct) {
                button.classList.add('correct');
            }
        });

        if (selectedOption == correct) {
            score++;
            feedback.innerText = "✅ Correct! " + currentQuestion.explanation;
            feedback.className = 'correct';
        } else {
            selectedButton.classList.add('incorrect');
            feedback.innerText = "❌ Incorrect. " + currentQuestion.explanation;
            feedback.className = 'incorrect';
        }

        feedback.style.display = 'block';
        nextBtn.style.display = 'inline-block';
    }

    function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < activeQuizData.length) {
            loadQuestion();
        } else {
            endQuiz();
        }
    }

    function endQuiz() {
        progressBar.style.width = '100%';
        quizContainer.style.display = 'none';
        resultScreen.style.display = 'block';

        document.getElementById('score-text').innerText = `Your Final Score: ${score} / ${activeQuizData.length}`;

        const badgeDiv = document.getElementById("badge");
        if (score >= 8) {
            badgeDiv.innerHTML = "🏆 <span class='gold'>Gold Badge</span> - Excellent Work!";
        } else if (score >= 5) {
            badgeDiv.innerHTML = "🥈 <span class='silver'>Silver Badge</span> - Good Job!";
        } else {
            badgeDiv.innerHTML = "🥉 <span class='bronze'>Bronze Badge</span> - Keep Practicing!";
        }
    }

    function restartQuiz() {
        quizWrapper.style.display = 'none';
        difficultyModal.style.display = 'flex';
    }
  </script>

</body>
</html>